<div class="notifications-widget">
  <!-- Bell Icon Button -->
  <button class="bell-btn" (click)="toggleNotifications()">
    <span class="bell-icon">ðŸ””</span>
    <span *ngIf="getUnreadCount() > 0" class="badge">{{ getUnreadCount() }}</span>
  </button>

  <!-- Notifications Dropdown -->
  <div *ngIf="isOpen()" class="notifications-dropdown">
    <div class="dropdown-header">
      <h3>Notifications</h3>
      <button class="close-btn" (click)="toggleNotifications()">âœ•</button>
    </div>

    <div class="notifications-list">
      <!-- Empty State -->
      <div *ngIf="notifications().length === 0" class="empty-notifications">
        <p>Aucune notification pour le moment</p>
      </div>

      <!-- Notifications -->
      <div *ngFor="let notif of notifications()" 
           class="notification-item" 
           [class.unread]="!notif.is_read"
           (click)="navigateToPublication(notif)"
           [style.cursor]="notif.pub_id ? 'pointer' : 'default'">
        <div class="notification-icon">{{ getActionIcon(notif.action_type || notif.action) }}</div>
        <div class="notification-content">
          <div class="notification-header">
            <p class="notification-message">{{ notif.message || 'Nouvelle notification' }}</p>
            <p class="notification-time">{{ formatDate(notif.created_at || notif.createdAt) }}</p>
          </div>
          <p class="notification-sender">De <strong>{{ notif.sender_name }}</strong></p>
        </div>
      </div>
    </div>
  </div>
</div>
